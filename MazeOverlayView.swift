//
//  MazeBlurView.swift
//  Pathwise
//
//  Created by Zhang Hongliang on 20/2/25.
//
import SwiftUI

struct MazeOverlayView: View {
    @Binding var mazeCells: [Cell]
    @Binding var startCoor: CGPoint
    @Binding var endCoor: CGPoint
    @Binding var rectWidth: CGFloat
    
    // When Cell.solution is true, it will be highlighted in a colour with its border or something
    
    var body: some View {
        Grid(horizontalSpacing: 0, verticalSpacing: 0) {
            ForEach(0..<11, id: \.self) {
                yAxis in
                GridRow {
                    ForEach(0..<11, id: \.self) { xAxis in
                        if let cell = mazeCells.first(where: { c in
                            c.x == xAxis && c.y == yAxis
                        }){
                            // Maze Drawing code
                            ZStack {
                                if !cell.visited && !(cell.x == Int(endCoor.x) && cell.y == Int(endCoor.y)) && !(cell.x == Int(startCoor.x) && cell.y == Int(startCoor.y)) {
                                    //Every other cell is hidden if cell is not visited and is also not the start
                                    Rectangle()
                                        .fill(Color.gray)
                                        .frame(width: rectWidth/10, height: rectWidth/10)
                                }
                                if !cell.visited && (cell.x == Int(endCoor.x) && cell.y == Int(endCoor.y)) && !cell.solution {
                                    //Goal Cell
                                    Rectangle()
                                        .fill(.clear)
                                        .border(.gray, width: 3)
                                }
                                if !cell.visited && (cell.x == Int(startCoor.x) && cell.y == Int(startCoor.y)){
                                    //Start Cell
                                    Rectangle()
                                        .fill(.clear)
                                        .border(.gray, width: 3)
                                }
                            }
                            .frame(width: rectWidth/10, height: rectWidth/10)
                        }
                    }
                }
            }
        }
    }
}

#Preview {
    MazeOverlayView(mazeCells: .constant([Pathwise.Cell(x: 9, y: 1, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 10, y: 1, up: false, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 8, y: 5, up: true, down: false, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 7, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 8, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 9, y: 8, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 9, y: 7, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 8, y: 7, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 8, y: 8, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 7, y: 8, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 8, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 9, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 5, y: 10, up: true, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 10, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 9, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 9, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 1, y: 9, up: true, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 1, y: 10, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 10, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 10, up: false, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 1, y: 8, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 1, y: 7, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 1, y: 6, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 1, y: 5, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 2, y: 4, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 2, y: 3, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 1, y: 2, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 2, up: false, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 3, y: 4, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 4, up: true, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 4, y: 5, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 5, y: 5, up: true, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 5, y: 6, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 6, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 6, y: 7, up: true, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 7, up: false, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 5, y: 7, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 5, y: 8, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 4, y: 8, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 7, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 4, y: 6, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 3, y: 6, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 6, up: true, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 5, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 5, up: false, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 2, y: 7, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 2, y: 8, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 8, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 3, y: 7, up: false, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 5, y: 4, up: false, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 6, y: 10, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 10, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 7, y: 9, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 8, y: 9, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 9, y: 9, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 10, y: 9, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 10, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 9, y: 10, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 8, y: 10, up: false, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 2, y: 1, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 1, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 3, y: 2, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 2, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 4, y: 1, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 1, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 5, y: 3, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 3, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 6, y: 4, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 6, y: 5, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 5, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 7, y: 6, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 8, y: 6, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 9, y: 6, up: false, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 10, y: 6, up: true, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 5, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 9, y: 5, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 9, y: 4, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 10, y: 4, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 3, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 10, y: 2, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 9, y: 2, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 9, y: 3, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 8, y: 3, up: false, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 8, y: 4, up: true, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 7, y: 4, up: true, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 3, up: true, down: true, left: false, right: false, visited: false, solution: false), Pathwise.Cell(x: 8, y: 2, up: true, down: false, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 8, y: 1, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 1, up: false, down: false, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 6, y: 2, up: true, down: false, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 7, y: 2, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 1, y: 4, up: true, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 1, y: 3, up: true, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 5, y: 2, up: true, down: true, left: false, right: true, visited: false, solution: false), Pathwise.Cell(x: 5, y: 1, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 5, y: 9, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 9, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 3, y: 3, up: false, down: true, left: true, right: true, visited: false, solution: false), Pathwise.Cell(x: 4, y: 3, up: false, down: true, left: true, right: false, visited: false, solution: false), Pathwise.Cell(x: 1, y: 1, up: false, down: false, left: false, right: true, visited: true, solution: false)]), startCoor: .constant(CGPoint(x: 1, y: 1)), endCoor: .constant(CGPoint(x: 10, y: 10)), rectWidth: .constant(500))
}
